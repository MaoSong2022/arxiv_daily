<div class="paper-card" data-paper-id="{paper_id}" data-paper-title="{title}">
    <div class="paper-visibility">
        <button class="visibility-toggle visibility-show"
            onclick="togglePaperVisibility(this, '{paper_id}')">Hide</button>
    </div>

    <h3 class="paper-title"><a href="{pdf_url}" target="_blank">{pdf_url}</a></h3>
    <h4 class="paper-title-text">{title}</h4>

    <div class="paper-metadata">
        <!-- Authors section -->
        {authors_section}

        <!-- Date information -->
        <div class="paper-dates">
            {date_section}
        </div>

        <!-- Keywords section -->
        <div class="keywords">
            <span class="metadata-label">Keywords:</span>
            {keywords_inputs}
            <button class="add-keyword-btn" onclick="addKeywordField(this)">+ Add</button>
        </div>

        <!-- Comments section -->
        <div class="comments-section">
            <span class="metadata-label">Comments:</span>
            <input type="checkbox" class="comments-checkbox" id="comments-{paper_id}">
            <label for="comments-{paper_id}" style="font-size: 12px; margin-right: 5px;">Export</label>
            <button class="comments-edit-btn" onclick="toggleCommentsEdit(this.parentElement)">Edit</button>

            <!-- View mode -->
            <div class="comments-view" onclick="toggleCommentsEdit(this.parentElement)">
                <div class="comments-content">{comments}</div>
            </div>

            <!-- Edit mode -->
            <div class="comments-edit" style="display: none;">
                <textarea class="comments-input" placeholder="Add comments about this paper">{comments}</textarea>
                <button class="comments-edit-btn"
                    onclick="toggleCommentsEdit(this.parentElement.parentElement)">Save</button>
            </div>
        </div>

        <!-- TL;DR section -->
        <div class="tldr-section">
            <span class="metadata-label">TL;DR:</span>
            <button class="tldr-edit-btn" onclick="toggleTldrEdit(this.parentElement)">Edit</button>

            <!-- View mode -->
            <div class="tldr-view" onclick="toggleTldrEdit(this.parentElement)">
                <div class="tldr-content">{tldr}</div>
            </div>

            <!-- Edit mode -->
            <div class="tldr-edit" style="display: none;">
                <textarea class="tldr-input" placeholder="Add a summary of this paper">{tldr}</textarea>
                <button class="tldr-edit-btn" onclick="toggleTldrEdit(this.parentElement.parentElement)">Save</button>
            </div>
        </div>
    </div>

    <!-- Abstract section -->
    {abstract_section}
</div>